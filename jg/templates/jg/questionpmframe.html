<!DOCTYPE html>
{% load static %}
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>CBT_PM</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<script>
$(function($){
    $(window).on('beforeunload',function(e){
        //e.preventDefault();
        //e.returnValue = '';
        console.log('beforeunload');
        return '更新しますか？';
    });

    var page = 1;
    var pdf = '{{ pdf }}';
    //終了ボタン
    $('#endbtn').on('click',function(){
        window.location.href = '{% url 'jg:questionpm' %}';
    });

    //戻るボタン
    $('#review').on('click',function(){
        if( page > 1 ){
            page = page - 1;
        }
        $("#iframe").attr('src', pdf + '#zoom=100&page=' + page);
        $('#iframe')[0].contentDocument.location.reload(true)
        console.log( pdf + '#page=' + page );
    });

    //次へボタン
    $('#nextview').on('click',function(){
        page = page + 1;
        $("#iframe").attr('src',pdf + '#zoom=100&page=' + page);
        $('#iframe')[0].contentDocument.location.reload(true)

        console.log( pdf + '#page=' + page );
    });

});
</script>
</head>
<body>
{% csrf_token %}
<div class="container-fluid">
    <div class="row" style="margin-top:20px;margin-left:20px">
        <div class="col-md-12">
                <span><input type="button" value="戻る" id="review"></span>
                <span><input type="button" value="次へ" id="nextview"></span>

                <spam><input type="button" value="終了" id="endbtn"></spam></p>
        </div>
    </div>

    <div class="row" style="margin-top:5px;margin-left:5px">
        <div class="col-md-8">

            <iframe src="{{ pdf }}" width="100%" height="800px" id="iframe">
                <p><b>表示されない時の表示</b>: <a href="pdf.pdf">PDF をダウンロード</a>.</p>
            </iframe>

        </div>

        <div class="col-md-3" id="res">

        </div>
    </div>
</div>


</body>
</html>